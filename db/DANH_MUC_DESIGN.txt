DB_DESIGN_CORE – THIẾT KẾ CỐT LÕI CSDL CTVT
(BÁM NGUYÊN Ý TƯỞNG NGHIỆP VỤ BAN ĐẦU)

====================================================
1. MỤC TIÊU HỆ THỐNG
====================================================
Xây dựng hệ thống quản lý bán gas cho Công ty Văn:

- Bán buôn + bán lẻ gas
- Có giao bình – thu bình
- Có bán chịu
- Có tiền mặt + chuyển khoản
- Có VAT đầu ra / đầu vào
- Công ty nhỏ, nhân viên kiêm nhiệm

DB phải phản ánh ĐÚNG thực tế vận hành,
không mô hình hoá kiểu doanh nghiệp lớn.


====================================================
2. TƯ DUY CỐT LÕI (KHÔNG ĐƯỢC PHÁ)
====================================================
1. Một người = nhiều vai trò
2. Giao dịch phát sinh ở nhân viên
3. Tiền và hàng đi cùng nhau
4. Công nợ là hệ quả của giao dịch
5. Kế toán online KHÔNG phát sinh giao dịch


====================================================
3. NHÓM DANH MỤC (ÍT THAY ĐỔI)
====================================================

3.1 NHÂN_VIÊN
----------------
Thực tế:
- Nhân viên bán hàng:
  + Bán gas
  + Giao gas
  + Thu tiền mặt
  + Giữ tiền trong ca
  + Nhập hàng
  + Nộp tiền cho công ty

- Kế toán online:
  + Không bán hàng
  + Không giữ tiền
  + Chỉ xử lý hóa đơn VAT và thuế

Nguyên tắc:
- KHÔNG tách thu ngân
- KHÔNG tách giao hàng
- Vai trò chỉ mang tính phân loại

3.2 KHÁCH_HÀNG
---------------
Thực tế:
- Có khách quen
- Có khách lẻ
- Có khách không tên
- Có khách cần xuất hóa đơn VAT

Nguyên tắc:
- Cho phép khách KHÔNG TÊN
- Cho phép khách dùng để cân thuế

3.3 SẢN_PHẨM
--------------
Thực tế:
- Gas bán theo bình
- Có quản lý vỏ
- Có nhiều loại dung tích

Nguyên tắc:
- Sản phẩm ≠ tồn kho
- Sản phẩm ≠ giá bán

3.4 KHO
--------
Thực tế:
- Nhập gas vào kho
- Xuất gas từ kho

Nguyên tắc:
- Kho chỉ là nơi chứa
- Không tự tính tồn


====================================================
4. NHÓM GIAO DỊCH (PHÁT SINH HÀNG NGÀY)
====================================================

4.1 HÓA_ĐƠN_BÁN
----------------
Thực tế:
- Nhân viên bán cho khách
- Có thể:
  + Thu đủ
  + Thu một phần
  + Bán chịu

Hóa đơn bán ghi nhận:
- Hàng đi
- Tiền thu
- Công nợ phát sinh
- Giao / thu vỏ

4.2 HÓA_ĐƠN_NHẬP
-----------------
Thực tế:
- Nhân viên nhập gas từ NCC
- Có thể:
  + Trả ngay
  + Mua chịu

Hóa đơn nhập ghi nhận:
- Hàng vào
- Tiền chi
- Công nợ NCC

4.3 THU_CHI
------------
Thực tế:
- Nhân viên:
  + Thu tiền khách
  + Nộp tiền công ty
- Công ty:
  + Chi tiền

Thu – chi là DÒNG TIỀN THỰC,
không phải báo cáo.

4.4 NHẬT_KÝ_VỎ
---------------
Thực tế:
- Giao vỏ
- Thu vỏ
- Đổi vỏ

Nguyên tắc:
- Vỏ quản lý bằng giao dịch
- Không gộp vào hóa đơn


====================================================
5. NHÓM TRẠNG THÁI / TỔNG HỢP
====================================================

5.1 TỒN_KHO
------------
- Là KẾT QUẢ
- Không nhập tay
- Tính từ:
  + Nhập kho
  + Xuất kho

5.2 CÔNG_NỢ
------------
- Là HỆ QUẢ
- Không phải giao dịch độc lập
- Phát sinh từ:
  + Hóa đơn bán
  + Hóa đơn nhập
  + Thu – chi

5.3 QUỸ
--------
- Có quỹ công ty
- Có quỹ nhân viên tạm giữ
- Dùng để đối soát


====================================================
6. VAI TRÒ KẾ TOÁN ONLINE
====================================================
Kế toán online:
- KHÔNG bán hàng
- KHÔNG thu tiền
- KHÔNG nhập kho

Chỉ:
- Lấy dữ liệu đã phát sinh
- Xuất hóa đơn VAT
- Cân thuế
- Xử lý khách không tên khi cần


====================================================
7. TRIGGER & VIEW – QUAN ĐIỂM CHỐT
====================================================

TRIGGER:
- Rất hạn chế
- Chỉ dùng để CHẶN SAI
- Không xử lý nghiệp vụ

VIEW:
- Chỉ dùng để ĐỌC
- Báo cáo
- Dashboard
- Không ghi dữ liệu


====================================================
8. VAI TRÒ FILE NÀY
====================================================
File này là:
- Kim chỉ nam nghiệp vụ
- Chuẩn để viết schema mới
- Chuẩn để viết API
- Chuẩn để refactor DB

Mọi thay đổi DB sau này
PHẢI SOI LẠI FILE NÀY TRƯỚC.
