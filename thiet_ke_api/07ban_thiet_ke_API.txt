BÆ¯á»šC 7 â€“ Tá»” CHá»¨C KIáº¾N TRÃšC CODE

(CODE ARCHITECTURE â€“ GIá»® Há»† THá»NG KHÃ”NG NÃT)

Má»¥c tiÃªu cá»§a BÆ°á»›c 7:
Quy Ä‘á»‹nh code pháº£i Ä‘Æ°á»£c tá»• chá»©c nhÆ° tháº¿ nÃ o Ä‘á»ƒ khÃ´ng phÃ¡ nghiá»‡p vá»¥, khÃ´ng phÃ¡ luáº­t, khÃ´ng phÃ¡ dá»¯ liá»‡u
â†’ dev chá»‰ Ä‘Æ°á»£c â€œÄ‘i trong khungâ€, khÃ´ng Ä‘Æ°á»£c sÃ¡ng tÃ¡c.

1. TÆ¯ DUY Gá»C Cá»¦A BÆ¯á»šC 7

Code khÃ´ng Ä‘Æ°á»£c quyáº¿t Ä‘á»‹nh nghiá»‡p vá»¥

Code chá»‰ thi hÃ nh nhá»¯ng gÃ¬ Ä‘Ã£ khÃ³a á»Ÿ BÆ°á»›c 1â€“6

Kiáº¿n trÃºc code pháº£i:

dá»… Ä‘á»c

dá»… kiá»ƒm tra

khÃ³ phÃ¡

ğŸ‘‰ BÆ°á»›c 7 lÃ  khÃ³a tay dev báº±ng cáº¥u trÃºc, khÃ´ng báº±ng lá»i nÃ³i.

2. NGUYÃŠN Táº®C Tá»” CHá»¨C CODE Báº¤T DI Báº¤T Dá»ŠCH

Nghiá»‡p vá»¥ khÃ´ng náº±m trong Controller

Luáº­t khÃ´ng náº±m trong DB

TÃ­nh toÃ¡n khÃ´ng náº±m trong API

BÃ¡o cÃ¡o khÃ´ng náº±m trong Service ghi

KhÃ´ng cÃ³ â€œchá»— tiá»‡nâ€ Ä‘á»ƒ nhÃ©t logic

ğŸ‘‰ Náº¿u tháº¥y code vi pháº¡m 1 trong 5 Ä‘iá»u trÃªn â†’ thiáº¿t káº¿ sai.

3. PHÃ‚N Táº¦NG KIáº¾N TRÃšC CHUáº¨N (KHÃ”NG PHáº¢I FRAMEWORK)
Táº¦NG 1 â€“ CONTROLLER (Cá»¬A VÃ€O)

Vai trÃ²

Nháº­n request

Validate hÃ¬nh thá»©c (Ä‘á»§ field, Ä‘Ãºng kiá»ƒu)

Gá»i service

KHÃ”NG ÄÆ¯á»¢C

KhÃ´ng viáº¿t nghiá»‡p vá»¥

KhÃ´ng kiá»ƒm tra luáº­t káº¿ toÃ¡n

KhÃ´ng truy DB trá»±c tiáº¿p

ğŸ‘‰ Controller ngu â€“ má»ng â€“ dá»… thay.

Táº¦NG 2 â€“ SERVICE (TRÃI TIM NGHIá»†P Vá»¤)

Vai trÃ²

Thá»±c thi sá»± kiá»‡n nghiá»‡p vá»¥

Kiá»ƒm tra:

quyá»n

tráº¡ng thÃ¡i

luáº­t báº¥t biáº¿n (BÆ°á»›c 4)

Quyáº¿t Ä‘á»‹nh:

ghi hay khÃ´ng ghi CORE

ÄÆ¯á»¢C PHÃ‰P

Äiá»u phá»‘i nhiá»u repository

Gá»i module sinh há»‡ quáº£

ğŸ‘‰ Service lÃ  nÆ¡i sáº¿p kiá»ƒm tra logic, khÃ´ng pháº£i controller.

Táº¦NG 3 â€“ DOMAIN / BUSINESS LOGIC (Náº¾U TÃCH)

(Ã¡p dá»¥ng khi há»‡ thá»‘ng lá»›n dáº§n)

Vai trÃ²

ÄÃ³ng gÃ³i:

quy táº¯c nghiá»‡p vá»¥

kiá»ƒm tra phá»©c táº¡p

Äá»ƒ service khÃ´ng phÃ¬nh to

ğŸ‘‰ Domain khÃ´ng biáº¿t API, khÃ´ng biáº¿t DB.

Táº¦NG 4 â€“ REPOSITORY / DATA ACCESS

Vai trÃ²

Truy cáº­p DB

Thá»±c hiá»‡n CRUD Ä‘Ãºng vai dá»¯ liá»‡u (BÆ°á»›c 3)

KHÃ”NG ÄÆ¯á»¢C

KhÃ´ng quyáº¿t Ä‘á»‹nh nghiá»‡p vá»¥

KhÃ´ng tÃ­nh toÃ¡n

KhÃ´ng join bÃ¡o cÃ¡o

ğŸ‘‰ Repository cÃ¢m â€“ trung láº­p â€“ cÃ³ thá»ƒ thay DB.

Táº¦NG 5 â€“ MODULE Há»† QUáº¢ / Háº¬U Xá»¬ LÃ

Vai trÃ²

Sinh:

nháº­t kÃ½

VAT

dá»¯ liá»‡u Ä‘á»‘i soÃ¡t

Nháº­n input chá»‰ tá»« CORE

ğŸ‘‰ Táº§ng nÃ y khÃ´ng cÃ³ API riÃªng.

4. QUY Æ¯á»šC Tá»” CHá»¨C THEO NGHIá»†P Vá»¤ (Ráº¤T QUAN TRá»ŒNG)

âŒ Sai (theo báº£ng):

HoaDonController
ThuChiController


âœ… ÄÃºng (theo nghiá»‡p vá»¥):

BanGas/
  BanGasController
  BanGasService

NhapGas/
  NhapGasService

ThuChi/
  ThuChiService


ğŸ‘‰ 1 nghiá»‡p vá»¥ = 1 module, khÃ´ng trá»™n.

5. QUáº¢N LÃ TRáº NG THÃI TRONG CODE

Tráº¡ng thÃ¡i chá»‰ Ä‘á»•i á»Ÿ Service

Repository khÃ´ng biáº¿t tráº¡ng thÃ¡i cÃ³ há»£p lá»‡ hay khÃ´ng

Controller khÃ´ng cho nháº£y tráº¡ng thÃ¡i

ğŸ‘‰ Tráº¡ng thÃ¡i = luáº­t, khÃ´ng pháº£i field thÆ°á»ng.

6. QUáº¢N LÃ Lá»–I (ERROR HANDLING)

Pháº£i phÃ¢n biá»‡t rÃµ:

Lá»—i nghiá»‡p vá»¥ (vi pháº¡m luáº­t)

Lá»—i quyá»n

Lá»—i dá»¯ liá»‡u

Lá»—i há»‡ thá»‘ng

âŒ KhÃ´ng tráº£ lá»—i chung chung
âœ… Lá»—i pháº£i Ä‘á»ƒ Ä‘á»‘i soÃ¡t â€“ audit â€“ debug

7. Vá»Š TRÃ Cá»¦A BÃO CÃO TRONG KIáº¾N TRÃšC

BÃ¡o cÃ¡o = module riÃªng

Chá»‰ Ä‘á»c:

CORE

JOURNAL

SNAPSHOT

KhÃ´ng gá»i service ghi

ğŸ‘‰ Cáº¥m bÃ¡o cÃ¡o gá»i API ghi ngÆ°á»£c láº¡i.

8. Káº¾T QUáº¢ PHáº¢I Äáº T SAU BÆ¯á»šC 7

Sau bÆ°á»›c nÃ y:

Dev má»›i vÃ o khÃ´ng dÃ¡m code bá»«a

Thay framework khÃ´ng Ä‘á»¥ng nghiá»‡p vá»¥

Sáº¿p nhÃ¬n cáº¥u trÃºc thÆ° má»¥c lÃ  biáº¿t:

Ä‘Ãºng hay sai

thiáº¿u hay thá»«a

ğŸ‘‰ Kiáº¿n trÃºc Ä‘Ãºng = há»‡ thá»‘ng tá»± báº£o vá»‡.

9. TUYÃŠN Bá» KHÃ“A BÆ¯á»šC 7

Tá»« sau BÆ°á»›c 7:

âŒ KhÃ´ng nhÃ©t logic vÃ o controller

âŒ KhÃ´ng gá»i DB ngoÃ i repository

âŒ KhÃ´ng viáº¿t â€œservice dÃ¹ng chung cho má»i thá»©â€

ğŸ‘‰ Code pháº£i phá»¥c vá»¥ nghiá»‡p vá»¥, khÃ´ng pháº£i ngÆ°á»£c láº¡i.